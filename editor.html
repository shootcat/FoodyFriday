<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Foody Friday Editor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header class="editor-header">
        <h1>News Editor</h1>
    </header>

    <main class="editor-container">
        <!-- Eingabe-Bereich -->
        <section class="editor-input">
            <h2>News-Text eingeben</h2>
            <textarea id="news-text" placeholder="Hier deine News eingeben..."></textarea>

            <h2>Bild hinzuf端gen</h2>
            <input type="text" id="image-url" placeholder="Bild-URL hier einf端gen">
            
            <button id="save-btn">Speichern</button>
        </section>

        <!-- Vorschau-Bereich -->
        <section class="editor-preview">
            <h2>Live-Vorschau</h2>
            <div id="preview-content">
                <p>Hier erscheint die Vorschau...</p>
            </div>
        </section>
    </main>

    <script>
        document.getElementById('news-text').addEventListener('input', updatePreview);
        document.getElementById('image-url').addEventListener('input', updatePreview);

        function updatePreview() {
            const text = document.getElementById('news-text').value;
            const imageUrl = document.getElementById('image-url').value;
            let previewHTML = `<p>${text}</p>`;
            
            if (imageUrl) {
                previewHTML += `<img src="${imageUrl}" alt="News-Bild" style="width: 100%; max-width: 600px; display: block; margin: 10px auto;">`;
            }
            
            document.getElementById('preview-content').innerHTML = previewHTML;
        }

        async function saveToGitHub() {
            const text = document.getElementById('news-text').value;
            const imageUrl = document.getElementById('image-url').value;
            const content = btoa(`${text}\n${imageUrl}`);

            await fetch('https://api.github.com/repos/shootcat/FoodyFriday/contents/news.txt', {
                method: 'PUT',
                headers: {
                    'Authorization': 'token HIER_DEIN_GITHUB_TOKEN', /* Hier den Token einf端gen */
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: "Update news",
                    content: content,
                    sha: await getCurrentSha()
                })
            });

            alert('News gespeichert!');
        }

        async function getCurrentSha() {
            const response = await fetch('https://api.github.com/repos/shootcat/FoodyFriday/contents/news.txt', {
                headers: {
                    'Authorization': 'token HIER_DEIN_GITHUB_TOKEN' /* Hier den Token einf端gen */
                }
            });
            const data = await response.json();
            return data.sha;
        }

        document.getElementById('save-btn').addEventListener('click', saveToGitHub);
    </script>

</body>
</html>
